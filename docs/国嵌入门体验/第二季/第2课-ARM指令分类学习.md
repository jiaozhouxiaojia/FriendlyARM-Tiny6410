<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [第2课-ARM指令分类学习](#第2课-arm指令分类学习)
	- [课程索引](#课程索引)
	- [算术和逻辑指令](#算术和逻辑指令)
		- [MOV](#mov)
		- [MVN](#mvn)
		- [sub](#sub)
		- [ADD](#add)
		- [AND 逻辑与](#and-逻辑与)
		- [BIC](#bic)
	- [比较指令](#比较指令)
		- [CMP](#cmp)
		- [TST](#tst)
	- [跳转指令/分支指令](#跳转指令分支指令)
		- [B](#b)
		- [BI](#bi)
	- [移位指令](#移位指令)
		- [lsl](#lsl)
		- [ror 循环右移](#ror-循环右移)
	- [程序状态字访问指令](#程序状态字访问指令)
		- [msr/mrs](#msrmrs)
	- [存储器访问指令](#存储器访问指令)

<!-- /TOC -->

---

# 第2课-ARM指令分类学习

## 课程索引

![1526264291776.png](image/1526264291776.png)

      根据手册学习并且手动实践！不实践学个锤子~~

![1526264398080.png](image/1526264398080.png)



## 算术和逻辑指令

      GNU汇编是小写，ARM标准汇编是大写
      指令作用，格式，实例

![1526264374756.png](image/1526264374756.png)

### MOV

      MOV dest,source ;dest=source
      ARM可以直接复制PC寄存器，X86不可复制EIP
      GNU汇编中加注释用@符号


![1526264556055.png](image/1526264556055.png)

![1526264885476.png](image/1526264885476.png)

### MVN

      取反后赋值
      MVN dest,source ;dest!=source

![1526264926313.png](image/1526264926313.png)

![1526265108785.png](image/1526265108785.png)

### sub

      SUB <dest>, <op 1>, <op 2> ; dest = op_1 - op_2
      注意：SUB里面dest和被减数不准使用立即数！！

![1526265156064.png](image/1526265156064.png)

![1526265233636.png](image/1526265233636.png)

![1526265286759.png](image/1526265286759.png)

### ADD

      ADD{条件}{S}  <dest>, <op 1>, <op 2>; dest = op_1 + op_2
      注意：ADD里面dest和被减数不准使用立即数！！

![1526265306207.png](image/1526265306207.png)

![1526265387016.png](image/1526265387016.png)

### AND 逻辑与

      AND{条件}{S}  <dest>, <op 1>, <op 2>; dest = op_1 AND op_2
      操作数 1 是一个寄存器，操作数 2 可以是一个寄存器，被移位的寄存器，或一个立即值
      操作数 1 不可以是立即数

![1526265407917.png](image/1526265407917.png)

![1526265507046.png](image/1526265507046.png)

### BIC

      BIC{条件}{S}  <dest>, <op 1>, <op 2>; dest = op_1 AND (!op_2)
      注意：标准ARM汇编%表示二进制，但是无法再GNU中使用，GNU用0b开头

![1526265535618.png](image/1526265535618.png)

![1526265817519.png](image/1526265817519.png)

## 比较指令

![1526266240431.png](image/1526266240431.png)


### CMP

      CMP{条件}{P}  <op 1>, <op 2>;status = op_1 - op_2
      会影响标志寄存器，CPSR程序状态寄存器

![1526266105176.png](image/1526266105176.png)

![1526266080744.png](image/1526266080744.png)

![1526265840974.png](image/1526265840974.png)

![1526265948618.png](image/1526265948618.png)

![1526266032872.png](image/1526266032872.png)


### TST

      TEQ{条件}{P}  <op 1>, <op 2>;Status = op_1 AND op_2

![1526266168918.png](image/1526266168918.png)

![1526266310612.png](image/1526266310612.png)

![1526266334609.png](image/1526266334609.png)


## 跳转指令/分支指令

![1526266348445.png](image/1526266348445.png)

### B

      一去不复返，分支指令。不带返回地址

![1526271333722.png](image/1526271333722.png)

![1526270988274.png](image/1526270988274.png)

![1526271073726.png](image/1526271073726.png)

![1526271301752.png](image/1526271301752.png)



### BI

        带返回地址。跳转时会设置lr
        可以通过mov pc,lr
        x86可是不允许直接设置EIP的

![1526271348646.png](image/1526271348646.png)

![1526271684223.png](image/1526271684223.png)

![1526271705087.png](image/1526271705087.png)

![1526271727989.png](image/1526271727989.png)



## 移位指令

![1526271762181.png](image/1526271762181.png)

### lsl

      左移

![1526271832759.png](image/1526271832759.png)

![1526271923764.png](image/1526271923764.png)



### ror 循环右移

      算数右移会丢掉移位，循环就不会丢

![1526271952286.png](image/1526271952286.png)

![1526272028688.png](image/1526272028688.png)





## 程序状态字访问指令

![1526272045727.png](image/1526272045727.png)

      程序状态字不能用mov、and操作，必须用专用指令
      先把程序状态字搬到通用寄存器，修改过后专用指令搬回
      s--->r   status ---> register
      r--->s   register ---> status

### msr/mrs

![1526272183286.png](image/1526272183286.png)

![1526272242892.png](image/1526272242892.png)

![1526272293436.png](image/1526272293436.png)


## 存储器访问指令

      CPU内部存储器、寄存器访问和内存访问不同
      内存和寄存器之间的访问需要用到别的指令
      ldr：内存到寄存器
      str：寄存器到内存
      SINGLE DATA TRANSFER（sdr）
      LDR --- Load from memory into a register
      STR --- Store from a register into memory

![1526272324987.png](image/1526272324987.png)

![1526272482656.png](image/1526272482656.png)

![1526272498613.png](image/1526272498613.png)

![1526272738364.png](image/1526272738364.png)


![1526272886305.png](image/1526272886305.png)
