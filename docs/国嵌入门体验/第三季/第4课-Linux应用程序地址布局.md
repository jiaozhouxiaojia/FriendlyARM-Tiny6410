<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [第4课-Linux应用程序地址布局](#第4课-linux应用程序地址布局)
	- [程序构成](#程序构成)
	- [内存分布](#内存分布)
	- [查看程序各个段](#查看程序各个段)
	- [各个段的内容](#各个段的内容)
	- [数据存放](#数据存放)
	- [BSS段-使用readelf分析](#bss段-使用readelf分析)
	- [如何显示段的详细信息](#如何显示段的详细信息)
	- [总结](#总结)

<!-- /TOC -->
# 第4课-Linux应用程序地址布局

      Linux运行时在内存中地址分布如何？
      变量放在哪里？
      常量放在哪里?
      堆栈从哪里开辟？

## 程序构成

![1527726361520.png](image/1527726361520.png)

      堆栈就是栈
      堆是堆
      堆栈不是堆

## 内存分布

![1527726489225.png](image/1527726489225.png)

      代码段固定在0x80480000(虚拟地址)
      堆是低地址往高地址，栈是高地址往低地址

![1527726613590.png](image/1527726613590.png)

## 查看程序各个段

![1527726641877.png](image/1527726641877.png)

![1527726650037.png](image/1527726650037.png)

![1527726677360.png](image/1527726677360.png)

![1527726685197.png](image/1527726685197.png)

![1527726712653.png](image/1527726712653.png)

      通过/proc伪文件系统查看进程地址空间布局

![1527726724197.png](image/1527726724197.png)

![1527726784446.png](image/1527726784446.png)

![1527726800430.png](image/1527726800430.png)

## 各个段的内容

* 全局初始化
* 全局未初始化
* 全局静态初始化
* 全局静态未初始化
* 全局常量
* 局部初始化变量
* 局部未初始化
* 静态局部初始化
* 静态局部未初始化
* 局部常量
* 通过malloc分配得到的局部堆内存

![1527727060373.png](image/1527727060373.png)

      打印变量的地址和值

![1527727093027.png](image/1527727093027.png)

![1527727150407.png](image/1527727150407.png)

![1527727179379.png](image/1527727179379.png)

![1527727228899.png](image/1527727228899.png)

![1527727251735.png](image/1527727251735.png)

## 数据存放

![1527727337511.png](image/1527727337511.png)

      代码段：代码、全局常量、字符串常量
      数据段：全局变量、静态变量
      堆：动态分配的变量
      栈：局部变量，不包含静态变量

![1527727375189.png](image/1527727375189.png)

## BSS段-使用readelf分析

![1527727402438.png](image/1527727402438.png)

![1527727411034.png](image/1527727411034.png)

![1527727436076.png](image/1527727436076.png)

      file提取文件简单头信息

![1527727472424.png](image/1527727472424.png)

      数据段是广义上的数据段，应为它包括其他子段，比如bss段
      .bss段:未初始化数据段
      .data:初始化数据段

![1527727558100.png](image/1527727558100.png)

![1527727590075.png](image/1527727590075.png)



## 如何显示段的详细信息

## 总结
