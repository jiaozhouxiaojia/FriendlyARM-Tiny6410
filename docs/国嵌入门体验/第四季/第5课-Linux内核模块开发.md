<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [第5课-Linux内核模块开发](#第5课-linux内核模块开发)
	- [课程索引](#课程索引)
	- [什么是内核模块](#什么是内核模块)
	- [内核模块设计](#内核模块设计)
		- [主体部分设计 - 思维导图设计](#主体部分设计-思维导图设计)
		- [自己动手编写内核模块](#自己动手编写内核模块)
		- [编译内核模块](#编译内核模块)
		- [安装/卸载内核模块](#安装卸载内核模块)
		- [可选项使用](#可选项使用)
	- [内核打印](#内核打印)
	- [总结](#总结)

<!-- /TOC -->

# 第5课-Linux内核模块开发


## 课程索引

![1526543214331.png](image/1526543214331.png)

内核模块技术与内核配置与编译时Linux开发基础，内核级开发，驱动开发基础

## 什么是内核模块

![1526543395206.png](image/1526543395206.png)

      bzImage一旦加载就一直存储在内存中，各个内核功能都在内存中，选取使用。
      但是如果功能需求比较多，bzImage就会体积大。因此把不需要的功能放到硬盘中。
      需要的时候访问硬盘加载。这种机制就是内核模块机制。

![1526543661721.png](image/1526543661721.png)

![1526543682779.png](image/1526543682779.png)

![1526543709046.png](image/1526543709046.png)

![1526543554110.png](image/1526543554110.png)

      动态安装卸载。Windows打补丁需要重启，而内核模块不需要重启，立即生效。

## 内核模块设计

![1526543741521.png](image/1526543741521.png)

![1526543754396.png](image/1526543754396.png)

      没有main函数，入口呢？
        必须有module_exit、module_init宏定义
      安装的时候调用，卸载的时候调用。
      头文件有两个必须包含
        <linux/init.h>
        <linux/module.h>

### 主体部分设计 - 思维导图设计

![1526543865079.png](image/1526543865079.png)

![1526544046626.png](image/1526544046626.png)

### 自己动手编写内核模块






### 编译内核模块





### 安装/卸载内核模块

![1526543768234.png](image/1526543768234.png)


### 可选项使用

![1526543776055.png](image/1526543776055.png)

![1526543783994.png](image/1526543783994.png)



## 内核打印




## 总结
